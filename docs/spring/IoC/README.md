# IoC

在理解 IoC 之前，先了解一下一个重要的设计原则：「[依赖倒置原则](/docs/design-pattern/设计原则/依赖倒置原则.md)」。


### IoC（控制反转）

控制反转，Inversion of Control

控制反转是基于依赖倒置原则的一种代码设计思想。在依赖倒置原则中，我们面向接口编程，依赖于抽象接口。例如：类 Aimpl 依赖接口 B、C 的实例。

那么就有一个问题，类 Aimpl 如何获取自己内部依赖的对象？

传统方式就是类 Aimpl 在内部手动 new 一个接口的具体实现类的对象。也就是由类 Aimpl 自己创建并管理依赖的对象。但是这种方式就是面向具体实现编程，不符合依赖倒置原则。

所以更应该将类 Aimpl 依赖的对象的创建操作分离到外部，然后在创建类 Aimpl 的对象时再从外部获取依赖的对象。这就是「控制反转」的思想。**「控制」指的是对依赖的对象的控制权（包括创建和管理），而「反转」就是将这个控制权交给外部，由外部管理所有依赖的对象，在需要时再从外部获取。**

通俗的讲，就是把原本需要开发者创建和维护的 bean 都交给 Spring 管理，
- **Spring 通过什么方式来管理 bean？由 IoC 容器管理。**
- **那又如何解决 bean 之间的依赖问题？通过依赖注入（DI）解决。**

通过 IoC 将开发者从复杂的 bean 管理和依赖关系中解放了。

#### IoC 的好处
显而易见，
- bean 集中管理，实现 Bean 的可配置
- 降低了类与类之间的耦合度
- 利于协作和单元测试

#### IoC 的实现方式
1. 依赖注入
从名字上可以看出，依赖注入是被动的接受依赖对象。

    依赖注入的方式：
    - 基于构造器
    - 基于 set 方法
    - 基于接口
    - 基于注解

2. 依赖查找
依赖查找是主动调用 IoC 容器的方法获取对象。


---
### DI（依赖注入）

依赖注入，Dependency Injection

在 IoC 中提到过，**IoC 的主要作用之一就是：在需要时，向某个对象提供其所依赖的对象**。依赖注入就是实现方式之一。


---
### IoC 容器

IoC 的主要作用之一：将对象的控制权交给外部，由外部进行初始化和管理。这里的外部就是 IoC 容器。

#### 初始化对象
也就是实例化 Bean，说白了就是 new 对象。不同的地方在与，这些对象都是由 IoC 容器来创建。虽然创建过程由 IoC 容器完成，但既然是创建对象，那么就可能需要初始化某些成员变量的值（还可以定义对象创建和销毁时需要执行的方法），所以我们需要通过配置（xml）的方式来定义一个对象的初始化过程，IoC 容器根据配置来创建对象。

> 通过配置其实就把对象间的依赖关系描述出来了，IoC 容器可以根据这个依赖关系来实现依赖注入。




### 参考
- [怎么回答面试官：你对Spring的理解？ - bravo1988的回答 - 知乎](https://www.zhihu.com/question/48427693/answer/723146648)
- [Spring IoC有什么好处呢？ - Mingqi的回答 - 知乎](https://www.zhihu.com/question/23277575/answer/169698662)
- [Spring基础(2)：放弃XML，走向注解 - bravo1988的文章 - 知乎](https://zhuanlan.zhihu.com/p/72668451)