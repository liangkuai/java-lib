# 程序计数器

> `线程私有`

PC，Program Counter Register，一块很小的内存空间。在 JVM 规范中，每个线程都有它自己的程序计数器。


### 存储内容

程序计数器会存储当前线程正在执行的 Java 方法的字节码指令地址，如果在执行 **Native 方法**，那就是空（`undefined`）。


### 作用

#### 1. 实现代码的流程控制

字节码解释器通过改变这个计数器的值来选取下一条需要执行的字节码指令，从而实现代码的流程控制。分支、循环、跳转、异常处理、线程恢复等功能都需要依赖这个计数器来完成。

#### 2. 多线程环境下，记录当前线程执行位置

在多线程环境下，程序计数器用于记录当前线程执行的字节码指令位置，当线程被切换回来的时候就知道该线程上次运行到哪儿了。

> JVM 的多线程是通过线程轮流切换并分配处理器执行时间的方式来实现的，在任何时刻，一个处理器（对于多核处理器来说就是一个内核）都只会执行一条线程中的指令。


### 注意

**程序计数器是唯一一个不会出现 `OutOfMemoryError` 的内存区域**。它的生命周期随着线程的创建而创建，随着线程的结束而销毁。